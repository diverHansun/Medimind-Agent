# RAG (Retrieval-Augmented Generation) Configuration

rag:
  # RAG operation mode
  # - auto: Automatically decide whether to use RAG based on query
  # - on: Always use RAG for queries
  # - off: Disable RAG, use LLM only
  mode: auto
  
  # Number of top similar documents to retrieve
  top_k:
    default: 5        # Default retrieval count
    high_risk: 10     # For high-risk medical queries
    low_risk: 3       # For general information queries
  
  # Minimum relevance score threshold (0-1)
  # Documents below this score will be filtered out
  min_relevance: 0.25
  
  # Reranking configuration
  rerank:
    enabled: false    # Enable reranking of retrieved documents
    model: null       # Reranking model (if enabled)
  
  # Time decay configuration
  # Reduce relevance of older documents
  time_decay:
    enabled: true
    half_life_days: 365  # Documents lose half relevance after this period
  
  # Source filtering configuration
  filters:
    # Preferred sources (boost relevance)
    prefer_sources:
      - guideline
      - pubmed
      - clinical_trial
    
    # Blocked sources (exclude from results)
    blocklist: []
  
  # Require citations for medical information
  require_citations_for_medical: true
  
  # Text splitting configuration
  text_splitter:
    chunk_size: 512       # Size of text chunks in tokens
    chunk_overlap: 50     # Overlap between chunks
    separator: "\n\n"     # Primary separator for splitting
  
  # Query engine configuration
  query_engine:
    response_mode: compact  # Response synthesis mode: compact, tree_summarize, simple_summarize
    streaming: false        # Enable streaming responses
